function fm_listen(e,o){console.log("fm_listen launched for id: "+e),jQuery(function($){var o=$("."+e+"-fmcta_element_order");o.sortable({placeholder:"ui-state-highlight",cursor:"move"}),o.disableSelection();var t=$("."+e+"-fmcta_landing_option"),c=$("."+e+"-fmcta_landing_href"),i=$("."+e+"-fmcta_feature_id"),n=$("."+e+"-fmcta_image_option"),a=$("."+e+"-fmcta_image_option_label"),l=$("."+e+"-fmcta_image_href"),d=$("."+e+"-fmcta_image_uploader"),h=$("."+e+"-fmcta_heading_title_option"),s=$("."+e+"-fmcta_heading_title_option_label"),f=$("#"+e+"-fmcta_heading_title_content"),r=$("."+e+"-fmcta_description_option"),u=$("."+e+"-fmcta_description_option_label"),m=$("."+e+"-fmcta_description_content"),_=$("."+e+"-fmcta_button_option"),p=$("."+e+"-fmcta_button_uploader"),g=$("."+e+"-fmcta_button_title_field"),k=$("#"+e+"-defaultTitle"),q=$("."+e+"-type"),w=$("."+e+"-type_link"),v=$("#"+e+"-linkURL"),y;"checked"==t.eq(0).attr("checked")&&(c.hide(),i.show()),"checked"==t.eq(1).attr("checked")&&(c.show(),console.log("initial run through"),i.hide()),t.eq(0).on("click",function(){c.hide(),i.show(),a.eq(1).show(),s.eq(1).show(),u.eq(1).show()}),t.eq(1).on("click",function(){c.show(),console.log("click"),i.hide(),a.eq(1).hide(),s.eq(1).hide(),u.eq(1).hide()}),"checked"==t.eq(1).attr("checked")&&n.eq(1).hide(),"checked"==t.eq(0).attr("checked")&&n.eq(1).show(),("checked"==n.eq(1).attr("checked")||"checked"==n.eq(2).attr("checked"))&&d.hide(),"checked"==n.eq(0).attr("checked")&&d.show(),n.eq(0).on("click",function(){d.show()}),n.eq(1).on("click",function(){d.hide()}),n.eq(2).on("click",function(){d.hide()}),h.on("change",function(){y=$("#"+e+"-feature option:selected").text()}),k.on("click",function(){k.attr("checked")&&featureMeTitle.attr("value",y)}),"checked"==h.eq(0).attr("checked")&&f.show(),"checked"==h.eq(1).attr("checked")&&f.hide(),"checked"==h.eq(2).attr("checked")&&f.hide(),h.eq(0).on("click",function(){console.log("first option"),f.show()}),h.eq(1).on("click",function(){console.log("second option"),f.hide()}),h.eq(2).on("click",function(){console.log("third option"),f.hide()}),"upload"==_.val()?(p.show(),g.hide()):p.hide(),_.on("change",function(){console.log("Changed to: "+$(this).val()),"upload"==$(this).val()?(p.show(),g.hide()):"none"==$(this).val()?(g.hide(),p.hide()):(g.show(),p.hide())}),"checked"==r.eq(0).attr("checked")&&(m.show(),console.log("custom description")),"checked"==r.eq(1).attr("checked")&&(m.hide(),console.log("excerpt description")),"checked"==r.eq(2).attr("checked")&&(m.hide(),console.log("no description")),r.eq(0).on("click",function(){m.show()}),r.eq(1).on("click",function(){m.hide()}),r.eq(2).on("click",function(){m.hide()}),"checked"==w.eq(0).attr("checked"),"checked"==w.eq(1).attr("checked"),"checked"==w.eq(2).attr("checked"),w.eq(0).on("click",function(){}),w.eq(1).on("click",function(){}),w.eq(2).on("click",function(){})})}function fm_cta_menu_click(e){console.log("fm_cta_menu_click function launched "+Date.now()),jQuery(function($){$("."+e+"-fm-option-1").on("click",function(){$("."+e+"-fm-step-1-options").slideToggle(),$(this).toggleClass("fm-arrow-open")}),$("."+e+"-fm-option-2").on("click",function(){$("."+e+"-fm-step-2-options").slideToggle(),$(this).toggleClass("fm-arrow-open")}),$("."+e+"-fm-option-3").on("click",function(){$("."+e+"-fm-step-3-options").slideToggle(),$(this).toggleClass("fm-arrow-open")}),$("."+e+"-fm-option-4").on("click",function(){$("."+e+"-fm-step-4-options").slideToggle(),$(this).toggleClass("fm-arrow-open")}),$("."+e+"-fm-option-5").on("click",function(){$("."+e+"-fm-step-5-options").slideToggle(),$(this).toggleClass("fm-arrow-open")})})}function fmcta_image_uploader(e){console.log("fmcta_image_uploader launched for: "+e);var o=!0,t=wp.media.editor.send.attachment;jQuery("."+e+" .button").click(function(e){console.log("click");var c=wp.media.editor.send.attachment,i=jQuery(this),n=i.attr("id").replace("upload","image_href");return console.log("Upload id: "+n),o=!0,wp.media.editor.send.attachment=function(e,c){return o?(jQuery("#"+n).val(c.url),void console.log("sent")):t.apply(this,[e,c])},wp.media.editor.open(i),!1}),jQuery(".add_media").on("click",function(){o=!1})}function fmcta_get_ids(){jQuery(function($){var e=$('.widget:contains("feature_me")');e.length>1&&e.splice(0,1);for(var o=new Array,t=0;t<e.length;t++)o[t]=e.eq(t).attr("id");console.log("fm_ids: "+o);for(var t=0;t<o.length;t++)o[t]=o[t].replace(/widget-[0-9]*_/,"widget-"),fm_listen(o[t]),fm_cta_menu_click(o[t])})}jQuery(document).ready(function($){console.log("jQuery works"),fmcta_get_ids(),fm_cta_menu_click(),fmcta_image_uploader("fm-step-2-options"),fmcta_image_uploader("fm-step-4-options"),jQuery(document).ajaxSuccess(function(e,o,t){var c="feature_me";-1!=t.data.search("action=save-widget")&&-1!=t.data.search("id_base="+c)&&(fmcta_get_ids(),fm_cta_menu_click(),fmcta_image_uploader("fm-step-2-options"),fmcta_image_uploader("fm-step-4-options"))})});